(function(){'use strict';RNB.Util.createNS('RNB.User');RNB.User.customerFactory=mobx.action(function customerFactory(){var customerApi=mobx.observable({prevCustomerState:mobx.observable.ref(),customerId:null,shoppingCartId:null,loggedIn:false,shoppingCartQuantity:0,swatchCartQuantity:0,wishlistCartQuantity:0,totalQuantity:0,shoppingCartHashValue:null,_links:null,userName:null,zipCode:null,isSwatchOnlyCart:mobx.computed(function isSwatchOnlyCart(){return _.gt(customerApi.swatchCartQuantity,0)&&customerApi.shoppingCartQuantity===0;}),isNewCart:mobx.computed(function isNewCart(){return customerApi.totalQuantity===0;}),setCustomerData:mobx.action(function setCustomerData(data){if(!_.isEmpty(data)){customerApi.customerId=data.customerId;customerApi.loggedIn=data.loggedIn;customerApi.wishlistCartQuantity=data.wishlistSummary.quantity;customerApi.shoppingCartQuantity=data.cartSummary.shoppingCartQuantity;customerApi.shoppingCartId=data.cartSummary.shoppingCartNumber;customerApi.swatchCartQuantity=data.cartSummary.swatchCartQuantity;customerApi.totalQuantity=data.cartSummary.totalQuantity;customerApi.userName=data.userName;customerApi._links=data._links;customerApi.zipCode=data.zipCode;}})});return customerApi;});}());(function(){'use strict';RNB.Util.createNS('RNB.User');RNB.User.transportationZoneFactory=mobx.action(function transportationZoneFactory(customer){var tzoneApi=mobx.observable({model:{transportationZoneKey:null,deliveryPrice:null,contentAreaKey:null,contentAreaValue:null,zipCode:null,nationalUnconfirmedContentArea:null,forbidden:null},hasTransportationZone:mobx.computed(function hasTransportationZone(){return _.get(customer,'_links.currentTransportationZone.href');}),setTransportationZoneData:mobx.action(function setTransportationZoneData(data){if(!_.isEmpty(data)){tzoneApi.model.transportationZoneKey=data.transportationZoneKey;tzoneApi.model.deliveryPrice=data.deliveryPrice;tzoneApi.model.contentAreaKey=data.contentAreaKey;tzoneApi.model.contentAreaValue=data.contentAreaValue;tzoneApi.model.zipCode=data.zipCode;tzoneApi.model.nationalUnconfirmedContentArea=data.nationalUnconfirmedContentArea;tzoneApi.model.forbidden=data.forbidden;}}),clearTransportationZoneData:mobx.action(function clearTransportationZoneData(){tzoneApi.model=_.mapValues(tzoneApi.model,function(){return null;});}),getTransportationZone:mobx.action(function getTransportationZone(){if(_.isEmpty(tzoneApi.hasTransportationZone)){return(Promise.reject({isServerError:false,message:'Customer has no transportation zone.'}).catch(function(error){throw error;}));}
return axios.get(tzoneApi.hasTransportationZone).then(function(response){tzoneApi.setTransportationZoneData(response.data);return Promise.resolve(response);});}),setTransportationZone:mobx.action(function setTransportationZone(zipCode){var setTzoneLink=_.get(customer,'_links.setTransportationZone.href');var responseData;if(_.isEmpty(zipCode)){return tzoneApi.getTransportationZone();}
return new Promise(function(resolve,reject){axios.post(setTzoneLink,{zipCode:zipCode}).then(function(response){responseData=response;RNB.User.userModel.loadUser().then(function(){tzoneApi.setTransportationZoneData(responseData.data);resolve(responseData);});}).catch(function(error){reject(error);});});})});return tzoneApi;});}());RNB.Util.createNS('RNB.User');(function(){'use strict';RNB.User.userModelFactory=mobx.action(function userModel(){var userModel=mobx.observable({customer:RNB.User.customerFactory(),transportationZone:{model:{zipCode:null}},employee:null,loading:true,customerStatus:mobx.computed(function customerStatus(){return _.get(userModel,'employee.shoppingWith.source',null);}),loadUser:mobx.action(function loadUser(){var promise=axios.get('/user',{validateStatus:function(status){return status<400;}});promise.then(function(response){userModel.setUserData(response.data,response.headers);userModel.setCachedUserData(JSON.stringify({data:response.data,headers:response.headers}));if(!_.has(userModel,'transportationZone.model.contentAreaKey')){userModel.transportationZone=RNB.User.transportationZoneFactory(userModel.customer);}
RNB.Account.Actions.cartSummaryUpdated.dispatch(userModel);});return promise;}),setUserData:mobx.action(function setUserData(userData){userModel.loading=false;userModel.customer.setCustomerData(userData.customer);if(userData.employee){userModel.employee=userData.employee;}}),setCachedUserData:mobx.action(function setCachedUserData(value){try{if(window.sessionStorage){window.sessionStorage.setItem('UserData',value);}}catch(error){console.warn('`sessionStorage` not supported, using session cookies instead',error);RNB.Util.cookies('UserData',value);}}),cachedUserData:mobx.computed(function getCachedUserData(){var result;try{if(window.sessionStorage){result=window.sessionStorage.getItem('UserData');}}catch(error){console.warn('`sessionStorage` not supported, using session cookies instead',error);result=RNB.Util.cookies('UserData');}
return _.isEmpty(result)?'':JSON.parse(result);})});if(userModel.cachedUserData){userModel.setUserData(_.get(userModel,'cachedUserData.data'),_.get(userModel,'cachedUserData.headers'));}
return userModel;});RNB.User.userReactions=function(){var userModel=RNB.User.userModel;var prevLoggedIn=userModel.customer.loggedIn;var prevCartCount=userModel.customer.shoppingCartQuantity;mobx.when(function(){if(!userModel.loading){if(!userModel.customer.loggedIn){prevCartCount=userModel.customer.shoppingCartQuantity;}else if((userModel.customer.loggedIn!==prevLoggedIn)){return(prevCartCount>0)&&(prevCartCount!==userModel.customer.shoppingCartQuantity);}}
return false;},function(){RNB.Util.cookies('cartChanged',true);});mobx.autorunAsync(function(){var customerId=_.get(RNB,'User.userModel.customer.customerId');if(customerId){s=s_gi(s_account);s.linkTrackVars='eVar83';s.eVar83=customerId;s.tl('true','o');}},250);};RNB.User.userModel=RNB.User.userModelFactory();RNB.User.userModel.loadUser();RNB.User.userReactions();}());(function($){RNB.Account.Actions.signedIn.add(function(){RNB.User.userModel.loadUser().then(function(){var email=_.get(RNB,'User.userModel.customer.userName');var results={cart:{skus:[],prices:[],qtys:[]}};RNB.Shop.REST.API.Cart.getCart().done(function(resp){var shippingGroups=_.get(resp,'cartDetailDto.shippingGroups',[]);if(shippingGroups.length){_.forEach(shippingGroups,function(shippingGroup){_.forEach(shippingGroup.lineItems,function(lineItem){results.cart.prices.push(lineItem.sellingPrice);results.cart.qtys.push(lineItem.quantity);if(lineItem.cartProducts.length===1){results.cart.skus.push(_.first(lineItem.cartProducts).articleNumber);}else{results.cart.skus.push(lineItem.defaultArticleNumber);}});});}
RNB.Integrations.IGoDigital.Tracking.create({rtaCart:_.flatten(results.cart.skus).join('|'),rtaCartAmounts:_.flatten(results.cart.prices).join('|'),rtaCartQuantities:_.flatten(results.cart.qtys).join('|'),rtaEmail:email,pageName:document.title});});});});})();RNB.Util.createNS('RNB.Account.Main');(function(){'use strict';var signalBindings=[];var showModalListener=null;RNB.Account.Main.showModalCreateAccount=function(overrideCallback,formOverrides){var modalOptions={};if(RNB.Globals.isMobile){modalOptions.modalWidth=300;}
RNB.Account.Main.showModalSignInWithOptions(modalOptions,React.createElement(RNB.Account.Create.page,{store:RNB.Account.Create.store(overrideCallback,_.assign({},formOverrides,{isInModal:true}))}),'create-account-container');};RNB.Account.Main.showModalCreateAccountSetCreateAccountModel=function(createAccountModelOverrides){RNB.Account.Main.showModalCreateAccount(null,createAccountModelOverrides);};RNB.Account.Main.showModalSignIn=function(options,callback){options=_.assign({},options);var signInSuccessBinding;var createAccountSuccessBinding;var modalOptions=_.get(options,'modalOptions',{});if(RNB.Globals.isMobile){_.assign(modalOptions,{modalWidth:300});}
if(_.isFunction(options.signInSuccessCallback)){signInSuccessBinding=RNB.Account.Actions.signedIn.addOnce(options.signInSuccessCallback,null,2);RNB.Account.Actions.closeSignInModal.addOnce(function(){signInSuccessBinding.detach();});}
if(_.isFunction(options.createAccountSuccessCallback)){createAccountSuccessBinding=RNB.Account.Actions.createdNewAccount.addOnce(function(){if(signInSuccessBinding){signInSuccessBinding.detach();}
options.createAccountSuccessCallback()},null,3);RNB.Account.Actions.closeSignInModal.addOnce(function(){createAccountSuccessBinding.detach();});}
RNB.Account.Main.showModalSignInWithOptions(modalOptions,React.createElement(RNB.Account.Login.page,{store:RNB.Account.Login.store(callback,{isInModal:true})}),'');};RNB.Account.Main.showModalSignInWithOptions=function(modalOptions,reactElement,modal2ContentClass){var rmOptions={elementId:'react-modal-account',modalOptions:_.assign({modalWidth:875,showHeader:true,modalHeader:'<div class="AutoModalHeader AutoModalHeader--compact"><button class="js-close-modal AutoModal-close"></button></div>',forceFocusOnCloseButton:false},modalOptions),componentToRender:reactElement,rootElement:'<div class="AutoModalBody login-container '+modal2ContentClass+'"  id="react-modal-account" role="region" aria-label="modal dialog"></div>',onModalClose:RNB.Account.Main.cleanupModalSignIn};RNB.Util.React.reactModal(rmOptions);signalBindings=signalBindings.concat(RNB.Account.Actions.signedIn.add(function closeSignInModalUponSuccess(){RNB.Util.React.closeReactModal();}));};RNB.Account.Main.cleanupModalSignIn=function(){RNB.Util.detachMultipleSignalBindings(signalBindings);signalBindings=[];RNB.Account.Actions.closeSignInModal.dispatch();$(document).off('click','.js-open-modal',RNB.Util.React.closeReactModal);};RNB.Account.Main._renderModalSignIn=function(rmOptions){ReactDOM.render(RNB.Account.Main._getElementToRender(),document.getElementById(rmOptions.elementId));};RNB.Account.Main._getElementToRender=function(){return React.createElement(RNB.Account.Login.page,{store:RNB.Account.Login.store()});};}());RNB.Util.createNS('RNB.Account.Login');(function(){'use strict';RNB.Account.Login.formModel=function(){return mobx.observable({username:'',password:'',showPassword:false,rememberMe:false});};RNB.Account.Login.formSettings=function(store){return{id:'login',reactProps:{method:'POST',onSubmit:function(event){if(store.form.plugins.formValidator.hasErrors){$.scrollTo(0,0,{duration:100});}}},settings:{plugins:[{pluginId:'validateAndAjaxSubmit',settings:{ajaxSubmit:{submitHandler:function(form){form.plugins.formValidator.validateForm();if(!form.plugins.formValidator.hasErrors){return RNB.Account.REST.API.signIn(form.model.username,form.model.password,form.model.rememberMe);}
return false;},promiseHandler:function(promise,form){promise.then(function(){store.isAuthenticated=true;store.isSubmitted=true;if(!_.isUndefined(store.callback)){store.callback();}
else if(!RNB.Globals.isOnProductPage&&!RNB.Globals.isOnShop){RNB.Util.redirect(RNB.Globals.secureDynaSitePath+_.get(RNB,'User.userModel.customer._links.accountPage.href'));}},function(error){store.isAuthenticated=false;store.isSubmitted=true;if(_.get(error,'response.data.fieldErrors')&&_.find(error.response.data.fieldErrors,{'field':'username'})&&store.form.fields.username.plugins.emailSuggest){store.form.fields.username.plugins.emailSuggest.enabled=false;}
$.scrollTo(0,0,{duration:100});return error;});return promise;}}}}]},fields:{username:{control:{reactProps:{type:'email',disabled:'',size:22,required:true}},label:{reactProps:{children:'Email Address'}},settings:{plugins:[{pluginId:'emailSuggest'}],validationConstraints:{presence:{message:'^Enter your email address'},email:{message:'^Please enter a valid email address.'}}}},password:{control:{reactProps:{autoCapitalize:false,autoCorrect:false,spellCheck:false,size:22,required:true}},label:{reactProps:{children:'Password'}},settings:{validationConstraints:{presence:{message:'^Enter your password'},length:{minimum:6,maximum:256},printableAscii:true}}},showPassword:{reactProps:{className:'inline-group show-password'},control:{reactProps:{type:'checkbox'}},label:{reactProps:{children:'Show password'}},settings:{validationConstraints:{}}},rememberMe:{control:{reactProps:{type:'checkbox'}},label:{reactProps:{children:'Remember me'}},settings:{validationConstraints:{}}}}};};}());RNB.Util.createNS('RNB.Account.Login');(function(){'use strict';RNB.Account.Login.form=mobxReact.observer(React.createClass({displayName:'AccountSignInForm',componentDidMount:function(){if(!RNB.Globals.isOnServer){$('#username-control-login').focus();}},render:function(){var form=this.props.store.form;var errorMessage=React.createElement('div',{className:'sign-in-error',role:'alert'},React.createElement('p',{},'We cannot find an account with that email address and password combination.'),React.createElement('p',{},'Please try again or ',React.createElement('a',{href:RNB.Globals.dynaSitePath+'/account/reset-password/'},'reset your password'),'.'));return React.DOM.form(form.reactProps,React.createElement(RNB.Formz2.Renderers.asyncFormSubmitErrorPlugin,{errorAttrs:{className:'server-error','aria-describedby':_.get(form,'id','')},form:form},errorMessage),React.createElement(RNB.Formz2.Renderers.emailFieldRenderer,{field:form.fields.username}),React.createElement(RNB.Formz2.Renderers.passwordRenderer,{field:form.fields.password,afterValidation:React.DOM.a({key:'forgot-your-password',className:'forgot-your-password',href:RNB.Globals.dynaSitePath+'/account/reset-password/'},'Forgot your password?'),showPasswordField:form.fields.showPassword}),React.createElement(RNB.Formz2.Renderers.checkboxRenderer,{field:form.fields.rememberMe}),React.createElement('input',{id:'signInSubmitButton',type:'submit',className:'Button',value:'Sign In'}));}}));}());RNB.Util.createNS('RNB.Account.Login');(function(){'use strict';RNB.Account.Login.page=mobxReact.observer(React.createClass({displayName:'AccountLoginPage',render:function(){var props=this.props;var loginSection;var createAccountSection;var createAccountProps={key:'create-an-account-link','data-qa':'create-an-account-button',className:'Button',onClick:this.createAccountClick};if(RNB.Globals.isMobile){createAccountProps.onTouchEnd=this.createAccountClick;}
if(props.store.isSubmitted&&props.store.isAuthenticated){return React.createElement('div',{className:'spinner-container'},React.createElement(RNB.Util.React.LoadingSpinner,{isLoading:true,minHeight:250,parentSettings:{width:'100%',height:'250px'}}));}
loginSection=[React.createElement('h1',{key:'login-section-header'},'Welcome Back'),React.createElement('div',{key:'login-directions',className:'form-intro'},'Please sign in with your account information.'),React.createElement(RNB.Account.Login.form,{key:'sign-in-form',store:props.store})];createAccountSection=[React.DOM.h2({key:'create-account-section'},'New Customers'),React.createElement('div',{key:'create-account-info',className:'form-intro'},'Your account lets you:'),React.DOM.ul({key:'account-lets-you-list'},React.createElement('li',null,'Speed checkout'),React.createElement('li',null,'Track your current and past orders'),React.createElement('li',null,'Save items to your Cart or Wish List and access them from any logged-in device'),React.createElement('li',null,'Save material swatches and review recently ordered swatches'),React.createElement('li',null,'Work with a Design Associate online or in-store and see updates to your Cart and Wish List from any logged-in device')),React.createElement('button',createAccountProps,'Create an Account')];return React.DOM.div({className:'ajax-submit-wrapper sign-in',style:{position:'relative'}},React.createElement(RNB.Formz2.Renderers.asyncFormSubmitLoadingPlugin,{form:props.store.form}),React.createElement('div',{className:'flex-row two-column mobile-stack'},React.createElement('div',null,loginSection),React.createElement('div',{className:'info-section'},createAccountSection)));},createAccountClick:function(){if(this.props.store.isInModal){RNB.Account.Main.showModalCreateAccount(this.props.store.callback,this.props.store.defaults);}else{RNB.Account.StatusActions.myAccountClicked.dispatch(this.props.store.callback);}}}));}());RNB.Util.createNS('RNB.Account.Login');(function(){'use strict';RNB.Account.Login.store=function loginStore(callback,defaults){var loginStore=mobx.extendObservable({},{form:mobx.observable.ref(),isSubmitProcessing:false,isSubmitted:false,isAuthenticated:false,isInModal:defaults&&defaults.isInModal,callback:callback});loginStore.defaults=defaults;loginStore.form=RNB.Formz2.Model.Builders.form(RNB.Account.Login.formModel(),RNB.Account.Login.formSettings(loginStore));return loginStore;};})();(function(){'use strict';_.set(RNB,'Account.CompleteAccountSetup.completeAccountSetupStore',mobx.action(function completeAccountSetupStore(){var store=mobx.observable({checkKeyValidity:mobx.action(function checkKeyValidity(){var promise=axios.get('/api/web/shop/account/reset-password/'+store.key);store.keyResults=mobxUtils.fromPromise(promise);}),completeAccountSetupSubmitHandler:mobx.action(function completeAccountSetupSubmitHandler(){store.viewState.goTo('loading');axios.post('/api/web/shop/account/reset-password/'+store.key,{newPassword:RNB.Util.Security.encodePassword(store.completeAccountSetupFormStore.form.model.password)}).then(function(response){window.location.href=RNB.Globals.secureSitePath+_.get(RNB,'User.userModel.customer._links.accountPage.href');}).catch(function(error){console.error('Error while setting password',error);});}),linkExpiredSubmitHandler:mobx.action(function linkExpiredSubmitHandler(){store.viewState.goTo('loading');axios.post('/api/web/shop/account/password/send-create-link',{username:store.linkExpiredFormStore.form.model.email}).then(function(response){store.viewState.goTo('emailSentSuccess');}).catch(function(error){console.error('Error while sending email',error);});}),get key(){var parsedUri=RNB.Util.Uri.parseUri(location);return _.get(parsedUri,'queryKey.key');},keyResults:null});store.completeAccountSetupFormStore=RNB.Account.CompleteAccountSetup.Formz.completeAccountSetupFormFactory(store.completeAccountSetupSubmitHandler);store.linkExpiredFormStore=RNB.Account.CompleteAccountSetup.Formz.linkExpiredFormFactory(store.linkExpiredSubmitHandler);store.viewState=RNB.Util.React.viewStateStore(store,{loading:{component:mobxReact.observer(React.createClass({render:function(){return React.DOM.div({style:{minHeight:'200px'}},React.createElement(RNB.Util.React.LoadingSpinner,{isLoading:true}));}}))},completeAccountSetup:{component:RNB.Account.CompleteAccountSetup.Renderers.completeAccountSetup,onEnter:function(viewState,store,parameters){return{store:store};}},linkExpired:{component:RNB.Account.CompleteAccountSetup.Renderers.linkExpired,onEnter:function(viewState,store,parameters){return{store:store};}},passwordSetSuccess:{component:mobxReact.observer(function(){return(React.createElement('div',{className:'complete-account-setup'},React.createElement('h1',null,'Password set successfully!')));})},emailSentSuccess:{component:RNB.Account.CompleteAccountSetup.Renderers.emailSentSuccess,onEnter:function(viewState,store,parameters){return{store:store};}}});store.checkKeyValidity();mobx.autorun('checkKeyValidity',function(){var keyState=_.get(store,'keyResults.state');switch(keyState){case'rejected':store.viewState.goTo('linkExpired');break;case'fulfilled':store.viewState.goTo('completeAccountSetup');break;default:store.viewState.goTo('loading');break;}});return store;}));}());(function(){'use strict';_.set(RNB,'Account.CompleteAccountSetup.Formz.completeAccountSetupFormFactory',function completeAccountSetupFormFactory(submitHandler){var modelTemplates=mobx.observable({password:'',showPassword:false});var formStore={model:mobx.observable(modelTemplates),formSettings:{id:'completeSetupAccountForm',reactProps:{onSubmit:function(event){event.preventDefault();formStore.form.plugins.formValidator.validateForm();if(!formStore.form.plugins.formValidator.hasErrors){if(_.isFunction(submitHandler)){submitHandler();}}}},settings:{plugins:[{pluginId:'formValidator'}]},fields:{password:RNB.Formz2.Utils.legacyConstMapper(RNB.Formz.FIELD_CONST.password),showPassword:RNB.Formz2.Utils.legacyConstMapper({reactProps:{input:{type:'checkbox'},label:{children:'Show password'}}})}}};formStore.form=RNB.Formz2.Model.Builders.form(formStore.model,formStore.formSettings);mobx.autorun('toggleShowPassword',function toggleShowPassword(){if(formStore.form.model.showPassword){_.set(formStore,'form.fields.password.control.reactProps.type','text');}else{_.set(formStore,'form.fields.password.control.reactProps.type','password');}});return formStore;});}());(function(){'use strict';_.set(RNB,'Account.CompleteAccountSetup.Formz.linkExpiredFormFactory',function linkExpiredFormFactory(submitHandler){var modelTemplates=mobx.observable({email:''});var formStore={model:mobx.observable(modelTemplates),formSettings:{id:'linkExpiredForm',reactProps:{onSubmit:function(event){event.preventDefault();formStore.form.plugins.formValidator.validateForm();if(!formStore.form.plugins.formValidator.hasErrors){if(_.isFunction(submitHandler)){submitHandler();}}}},settings:{plugins:[{pluginId:'formValidator'}]},fields:{email:(function(){var emailOptions=RNB.Formz2.Utils.legacyConstMapper(RNB.Formz.FIELD_CONST.email);_.set(emailOptions,'settings.plugins',[{pluginId:'emailSuggest'}]);_.set(emailOptions,'label.reactProps.children','Email Address');return emailOptions;}())}}};formStore.form=RNB.Formz2.Model.Builders.form(formStore.model,formStore.formSettings);return formStore;});}());(function(){'use strict';_.set(RNB,'Account.CompleteAccountSetup.Renderers.main',mobxReact.observer(function completeAccountSetupMainRenderer(props){return(React.createElement(mobxReact.Provider,{store:props.store},React.createElement(RNB.Util.React.viewStateRenderer,{viewState:props.store.viewState})));}));}());(function(){'use strict';_.set(RNB,'Account.CompleteAccountSetup.Renderers.completeAccountSetup',mobxReact.observer(function completeAccountSetupRenderer(props){var form=props.store.completeAccountSetupFormStore.form;return(React.createElement('div',{className:'complete-account-setup'},React.createElement('h1',null,'Complete Account Setup'),React.createElement('div',{className:'complete-account-setup-content'},React.createElement('div',{className:'complete-account-setup-info'},React.createElement('strong',null,'Use your account to:'),React.createElement('ul',null,React.createElement('li',null,'Speed checkout'),React.createElement('li',null,'Track your current and past orders'),React.createElement('li',null,'Save items to your Cart or Wish List and access them from any logged-in device'),React.createElement('li',null,'Save material swatches and review recently ordered swatches'),React.createElement('li',null,'Work with a Design Associate online or in-store and see updates to your Cart and Wish List from any logged-in device'))),React.createElement('div',{className:'complete-account-setup-form-container'},React.createElement('form',form.reactProps,React.createElement('div',form.fields.password.field.reactProps,React.createElement('div',{className:'field-label-group'},React.createElement('label',form.fields.password.label.reactProps),React.createElement('div',{className:'field-info'},'Your password must be at least 6 characters')),React.createElement('div',{className:'field-control-group'},React.createElement('input',form.fields.password.control.reactProps),React.createElement('div',form.fields.showPassword.field.reactProps,React.createElement('input',form.fields.showPassword.control.reactProps),React.createElement('label',form.fields.showPassword.label.reactProps))),React.createElement(RNB.Formz2.Renderers.validationRenderer,{field:form.fields.password})),React.createElement('p',{className:'terms-info'},"By creating an account, you agree to Room & Board's ",React.createElement('a',{href:RNB.Globals.secureDynaSitePath+'/terms-of-use/',key:'terms-link',target:'_blank'},'Terms of Use.')),React.createElement('input',{type:'submit',className:'Button',defaultValue:'COMPLETE SETUP'}))))));}));}());(function(){'use strict';_.set(RNB,'Account.CompleteAccountSetup.Renderers.emailSentSuccess',mobxReact.observer(function emailSentSuccessRenderer(props){var email=_.get(props,'store.linkExpiredFormStore.model.email');return(React.createElement('div',{className:'complete-account-setup email-sent-success'},React.createElement('h1',null,'Email Sent'),React.createElement('div',{className:'complete-account-setup-content email-sent'},React.createElement('p',null,'An email with instructions to reset your password has been sent to:'),React.createElement('p',null,React.createElement('strong',null,email)),React.createElement('p',null,'If you do not receive an email within the next 20 minutes:'),React.createElement('ul',null,React.createElement('li',null,'Check that you used the same email address as when your account was created.'),React.createElement('li',null,'Check your email spam folder.'),React.createElement('li',null,'Try again.'),React.createElement('li',null,'Call us at ',React.createElement('strong',{className:'u-orange01'},'800.301.9720'))))));}));}());(function(){'use strict';_.set(RNB,'Account.CompleteAccountSetup.Renderers.linkExpired',mobxReact.observer(function linkExpiredRenderer(props){var form=props.store.linkExpiredFormStore.form;return(React.createElement('div',{className:'complete-account-setup link-expired'},React.createElement('h1',null,'Link Expired'),React.createElement('div',{className:'complete-account-setup-content'},React.createElement('p',null,'Your account setup link has expired.'),React.createElement('p',null,"Please enter your email address and we'll send you an email with a new link to complete your "+"account setup. For your security, you'll have seven days to create a password before the link "+'expires.'),React.createElement('form',form.reactProps,React.createElement(RNB.Formz2.Renderers.emailFieldRenderer,{field:form.fields.email}),React.createElement('input',{type:'submit',className:'Button',defaultValue:'SUBMIT'})))));}));}());RNB.Util.createNS('RNB.Account.Create');(function(){'use strict';RNB.Account.Create.formModel=function(defaults){var d=defaults||{};return mobx.observable({username:d.username||'',password:'',showPassword:false,zipCode:d.zipCode||'',subscribe:false});};RNB.Account.Create.formSettings=function(store){return{id:'createAccount',reactProps:{key:'create-account-form',className:'formz',method:'POST',onSubmit:function(){if(store.form.plugins.formValidator.hasErrors){$.scrollTo(0,0,{duration:100});}}},settings:{plugins:[{pluginId:'validateAndAjaxSubmit',settings:{ajaxSubmit:{submitHandler:function(form){var tZonePromise;var legitPromiseWrapper;form.plugins.formValidator.validateForm();if(!form.plugins.formValidator.hasErrors){store.hasRequestError=false;if(store.useConvertGuest){return RNB.Account.REST.API.convertGuest(form.model.username,form.model.password);}
tZonePromise=RNB.User.userModel.transportationZone.setTransportationZone(form.model.zipCode);legitPromiseWrapper=new Promise(function(resolve,reject){tZonePromise.then(function(data){RNB.Account.REST.API.createAccount(form.model.username,form.model.password,form.model.zipCode,form.model.subscribe).then(function(data){resolve(data);},function(error){reject(error);});},function(error){reject('T_ZONE_NOT_FOUND');});});return legitPromiseWrapper;}
$.scrollTo(0,0,{duration:100});return false;},promiseHandler:function(promise,form){return promise.then(function(){store.isSubmitted=true;if(_.isFunction(store.callback)){store.callback();}else if(!RNB.Globals.isOnProductPage&&!RNB.Globals.isOnShop){RNB.Util.redirect(RNB.Globals.secureDynaSitePath+_.get(RNB,'User.userModel.customer._links.accountPage.href'));}},function(error){var errors;var mappedErrors;if(_.get(error,'response.status')=='500'){errors=[{errorKey:'username',errorMessage:'invalidEmail',fieldError:true}];mappedErrors=form.plugins.formValidator.mapErrorsToFieldErrors(errors);form.plugins.formValidator.mapServerSideValidationMessages(mappedErrors);store.form.fields.username.plugins.emailSuggest.enabled=false;}else if(error==='T_ZONE_NOT_FOUND'){errors=[{errorKey:'zipCode',errorMessage:'transportationZoneForbidden',fieldError:true}];mappedErrors=form.plugins.formValidator.mapErrorsToFieldErrors(errors);form.plugins.formValidator.mapServerSideValidationMessages(mappedErrors);}
if(_.get(error,'response.data.errors')&&_.find(error.response.data.errors,{'errorKey':'username'})&&store.form.fields.username.plugins.emailSuggest){store.form.fields.username.plugins.emailSuggest.enabled=false;}
store.submitted=false;$.scrollTo(0,0,{duration:100});return error;});}}}}]},fields:{username:{control:{reactProps:{type:'email',noValidate:true,size:22,required:true}},label:{reactProps:{children:'Email Address'}},settings:{plugins:[{pluginId:'emailSuggest'}],validationConstraints:{presence:{message:'^Enter your email address'},email:{message:'^Please enter a valid email address.'}}}},password:{control:{reactProps:{autoCapitalize:false,autoCorrect:false,spellCheck:false,noValidate:true,size:22,required:true}},label:{reactProps:{children:'Password'}},settings:{validationConstraints:{presence:{message:'^Enter your password'},length:{minimum:6,maximum:256},printableAscii:true}}},showPassword:{reactProps:{className:'inline-group show-password',noValidate:true},control:{reactProps:{type:'checkbox'}},label:{reactProps:{children:'Show password'}},settings:{validationConstraints:{}}},zipCode:{control:{reactProps:{type:'text',autoComplete:'postal-code',maxLength:10,size:10,noValidate:true,required:true}},label:{reactProps:{children:[React.createElement('span',{className:'u-ttu'},'Zip'),' Code']}},settings:{validationConstraints:{presence:{message:'^Enter your zip code'},zipCode:true,length:{minimum:5,maximum:10},printableAscii:true}}},subscribe:{control:{reactProps:{type:'checkbox',noValidate:true}},label:{reactProps:{children:['Please send me email updates about products and special events. We will not share, sell or trade your email. ',React.createElement('a',{href:'/privacy/',target:'_blank'},'Privacy Policy')]}},settings:{validationConstraints:{}}}}};};}());RNB.Util.createNS('RNB.Account.Create');(function(){'use strict';RNB.Account.Create.form=mobxReact.observer(React.createClass({displayName:'CreateAccountForm',componentDidMount:function(){if(!RNB.Globals.isOnServer){$('#username-control-createAccount').focus();}},render:function(){var form=this.props.store.form;var requestError=null;if(this.props.store.hasRequestError){requestError=React.createElement('div',{className:'validation'},'There was a problem with your request. Please validate and try again.');}
return(React.DOM.form(form.reactProps,React.DOM.legend({key:'create-account-directions',className:'required-legend-no-star'},'All information is required'),requestError,React.createElement(RNB.Formz2.Renderers.emailFieldRenderer,{key:'username-field',field:form.fields.username,afterLabel:React.DOM.div({className:'label-descriptor'},'You will use this to sign into your account.')}),React.createElement(RNB.Formz2.Renderers.passwordRenderer,{key:'password-field',field:form.fields.password,showPasswordField:form.fields.showPassword,afterLabel:React.DOM.div({className:'label-descriptor'},'Your password must be at least 6 characters.')}),React.createElement(RNB.Formz2.Renderers.fieldRenderer,{key:'zip-field',field:form.fields.zipCode}),React.createElement(RNB.Formz2.Renderers.checkboxRenderer,{key:'subscribe-field',field:form.fields.subscribe}),React.DOM.div({key:'creating-account-disclaimer',className:'disclaimer terms-of-use'},'By creating an account, you agree to Room & Board\'s ',React.DOM.a({key:'terms-of-use',href:'/terms-of-use/',target:'_blank'},'Terms of Use.')),React.createElement('input',{id:'submitFormButton',type:'submit',className:'Button',key:'create-account-submit',value:'Submit'}),React.DOM.div({key:'acccount-disclaimer',className:'disclaimer sign-in-link'},'Already have an account? ',React.DOM.a({key:'sign-in-link',href:RNB.Globals.secureDynaSitePath+'/account/sign-in/',onClick:this.signInLinkClicked},'Sign In'))));},signInLinkClicked:function(event){event.preventDefault();if(this.props.store.isInModal){RNB.Account.Main.showModalSignIn({},this.props.store.callback,this.props.store.defaults);}else{RNB.Account.StatusActions.signInClicked.dispatch(this.props.store.callback);}}}));}());RNB.Util.createNS('RNB.Account.Create');(function(){'use strict';RNB.Account.Create.page=mobxReact.observer(function createAccountPageRenderer(props){if(props.store.isSubmitted){return React.DOM.div({key:'loading-spinner-container',className:'spinner-container'},React.createElement(RNB.Util.React.LoadingSpinner,{key:'loading-spinner',isLoading:true,parentSettings:{width:'100%',height:'500px'}}));}
var formSection=[React.DOM.h1({key:'login-section-header'},'Create an Account'),React.createElement(RNB.Account.Create.form,{key:'login-section-form',store:props.store})];var infoSection=[React.DOM.h2({key:'create-account-info',className:'medium form-intro'},'Your account lets you:'),React.DOM.ul({key:'account-lets-you-list'},React.DOM.li({},'Speed checkout'),React.DOM.li({},'Track your current and past orders'),React.DOM.li({},'Save items to your Cart or Wish List and access them from any logged-in device'),React.DOM.li({},'Save material swatches and review recently ordered swatches'),React.DOM.li({},'Work with a Design Associate online or in-store and see updates to your Cart and Wish List from any logged-in device'))];return React.DOM.div({key:'ajax-submit-wrapper',className:'ajax-submit-wrapper create-account',style:{position:'relative'}},React.createElement(RNB.Formz2.Renderers.asyncFormSubmitLoadingPlugin,{key:'ajax-form-submit-plugin',form:props.store.form}),React.DOM.div({key:'flex-container',className:'flex-row two-column mobile-stack create-account-container'},React.DOM.div({key:'form-section',className:'form-section'},formSection),React.DOM.div({key:'info-section',className:'info-section'},infoSection)));});}());RNB.Util.createNS('RNB.Account.Create');(function(){'use strict';RNB.Account.Create.store=mobx.action(function createAccountStore(callback,defaults){var createAccountStore=mobx.observable({form:mobx.observable.ref(),isSubmitProcessing:false,isSubmitted:false,isInModal:defaults&&defaults.isInModal,hasRequestError:false,useConvertGuest:defaults&&defaults.useConvertGuest,callback:callback});createAccountStore.defaults=defaults;createAccountStore.form=RNB.Formz2.Model.Builders.form(RNB.Account.Create.formModel(defaults),RNB.Account.Create.formSettings(createAccountStore));return createAccountStore;});})();RNB.Util.createNS('RNB.Account.ResetPassword');(function(){'use strict';RNB.Account.ResetPassword.formModel=function(){return mobx.observable({username:''});};RNB.Account.ResetPassword.formSettings=function(store){return{id:'reset-password',reactProps:{method:'POST'},settings:{plugins:[{pluginId:'validateAndAjaxSubmit',settings:{ajaxSubmit:{submitHandler:function(form){return RNB.Account.REST.API.sendPasswordResetLink(form.model.username);},promiseHandler:function(promise,form){promise.then(function(){store.emailSent=true;store.isSubmitted=true;});promise.catch(function(error){var errors;var mappedErrors;if(_.get(error,'response.status')===404){errors=[{errorKey:'usernameNotFound',errorMessage:'usernameNotFound',fieldError:false}];mappedErrors=form.plugins.formValidator.mapErrorsToFieldErrors(errors);form.plugins.formValidator.mapServerSideValidationMessages(mappedErrors);}});}}}}]},fields:{username:{control:{reactProps:{type:'email',size:22,required:true}},label:{reactProps:{children:'Email Address'}},settings:{plugins:[{pluginId:'emailSuggest'}],validationConstraints:{presence:{message:'^Enter your email address'},email:{message:'^Please enter a valid email address.'}}}}}};};}());RNB.Util.createNS('RNB.Account.ResetPassword');(function(){'use strict';RNB.Account.ResetPassword.confirmation=mobxReact.observer(React.createClass({componentDidMount:function(){if(RNB.Globals.isMobile){window.scrollTo(0,0);}},render:function(){var props=this.props;return React.createElement('div',{className:'info-section'},React.createElement('h1',{},'Check Your Email'),React.createElement('div',{className:'form-intro'},React.createElement('p',{},'If there is an account associated with '+props.store.form.model.username+', you’ll receive an email with a link to reset your password.'),React.createElement('p',{},'We care about your security. If you don’t see a reset email in your inbox within 10 minutes, please look in your junk/spam folder. It’s also possible you have a Room & '+'Board account associated with a different email address. If so, ',React.createElement('a',{href:RNB.Globals.dynaSitePath+'/account/reset-password/'},'try again'),' with another email address or ',React.createElement('a',{href:RNB.Globals.sitePath+'/contactus/detail.do',className:'js-open-contact-us-modal'},'contact us'),' for help.')));}}));}());RNB.Util.createNS('RNB.Account.ResetPassword');(function(){'use strict';RNB.Account.ResetPassword.form=mobxReact.observer(function resetPasswordFormRenderer(props){var form=props.store.form;return(React.DOM.div({className:'ajax-submit-wrapper',style:{position:'relative'}},React.createElement(RNB.Formz2.Renderers.asyncFormSubmitLoadingPlugin,{form:form}),React.DOM.form(form.reactProps,React.createElement(RNB.Formz2.Renderers.fieldRenderer,{field:form.fields.username,ref:'username'}),React.createElement('input',{id:'submitFormButton',type:'submit',className:'Button',key:'reset-password-submit',value:'Submit'}))));});}());RNB.Util.createNS('RNB.Account.ResetPassword');(function(){'use strict';RNB.Account.ResetPassword.page=mobxReact.observer(function resetPasswordPageRenderer(props){if(props.store.isSubmitProcessing){return React.createElement('div',{className:'spinner-container'},React.createElement(RNB.Util.React.LoadingSpinner,{isLoading:true,parentSettings:{width:'100%',height:'500px'}}));}
else if(props.store.isSubmitted&&props.store.emailSent){return React.createElement(RNB.Account.ResetPassword.confirmation,props);}
return React.createElement('div',{},React.createElement('h1',{},'Reset Password'),React.createElement('div',{className:'form-intro'},'Please enter your email address.  We\'ll send you an email with a link to reset your password.'),React.createElement(RNB.Account.ResetPassword.form,{store:props.store}));});}());RNB.Util.createNS('RNB.Account.ResetPassword');(function(){'use strict';RNB.Account.ResetPassword.store=mobx.action(function loginStore(){var resetPasswordStore=mobx.observable({form:mobx.observable.ref(),isSubmitProcessing:false,isSubmitted:false,emailSent:false});resetPasswordStore.form=RNB.Formz2.Model.Builders.form(RNB.Account.ResetPassword.formModel(),RNB.Account.ResetPassword.formSettings(resetPasswordStore));return resetPasswordStore;});})();RNB.Util.createNS('RNB.Account.NewPassword');(function(){'use strict';RNB.Account.NewPassword.formModel=function(){return mobx.observable({password:'',showPassword:false});};RNB.Account.NewPassword.formSettings=function(submitHandler){return{id:'new-password',reactProps:{key:'new-password-form',onSubmit:function(event){event.preventDefault();submitHandler();return false;}},settings:{plugins:[{pluginId:'formValidator',settings:{}}]},fields:{password:{control:{reactProps:{autoCapitalize:false,autoCorrect:false,spellCheck:false,noValidate:true}},label:{reactProps:{children:'Password must be at least 6 characters'}},settings:{validationConstraints:{presence:{message:'^Enter your password'},length:{minimum:6,maximum:256},printableAscii:true}}},showPassword:{reactProps:{className:'inline-group show-password',noValidate:true},control:{reactProps:{type:'checkbox'}},label:{reactProps:{children:'Show password'}},settings:{validationConstraints:{}}}}};};}());RNB.Util.createNS('RNB.Account.NewPassword');(function(){'use strict';RNB.Account.NewPassword.form=mobxReact.observer(function resetPasswordFormRenderer(props){var form=props.store.form;return React.DOM.form(form.reactProps,React.createElement(RNB.Formz2.Renderers.passwordRenderer,{key:'password-field',field:form.fields.password,showPasswordField:form.fields.showPassword}),React.createElement('input',{id:'submitFormButton',type:'submit',className:'Button',key:'new-password-submit',value:'Submit'}));});}());RNB.Util.createNS('RNB.Account.NewPassword');(function(){'use strict';RNB.Account.NewPassword.page=mobxReact.observer(function newPasswordPageRenderer(props){if(props.store.isSubmitProcessing||props.store.isVerifyProcessing){return React.createElement('div',{key:'loading-spinner-container',className:'spinner-container'},React.createElement(RNB.Util.React.LoadingSpinner,{key:'loading-spinner',isLoading:true,minHeight:250,parentSettings:{width:'100%',height:'250px'}}));}
var loginSection=null;if(props.store.isKeyValid){loginSection=[React.createElement('h1',{key:'reset-password-section-header'},'Enter a New Password'),React.createElement(RNB.Account.NewPassword.form,props)];}else if(!props.store.emailSent){loginSection=[React.createElement('h1',{key:'reset-password-section-header'},'Link Expired'),React.createElement('div',{key:'reset-directions',className:'directions link-expired-directions'},'Your Reset Password link has expired.  Please enter your email address below and we\'ll send an email with an active link to reset your password.'),React.createElement(RNB.Account.ResetPassword.form,props)]}else if(props.store.isSubmitted&&props.store.emailSent){return React.createElement(RNB.Account.ResetPassword.confirmation,props)}
return React.createElement('div',{key:'login-section'},loginSection);});}());RNB.Util.createNS('RNB.Account.NewPassword');(function(){'use strict';RNB.Account.NewPassword.store=mobx.action(function newPasswordStore(key){var newPasswordStore=mobx.observable({form:mobx.observable.ref(),isSubmitProcessing:false,isVerifyProcessing:true,isKeyValid:false,isSubmitted:false,isAuthenticated:false,emailSent:false,resetKey:key,submitHandler:mobx.action(function(){if(newPasswordStore.isKeyValid){newPasswordStore.form.plugins.formValidator.validateForm();if(!newPasswordStore.form.plugins.formValidator.hasErrors){var promise=RNB.Account.REST.API.resetPassword(newPasswordStore.form.model.password,newPasswordStore.resetKey);newPasswordStore.isSubmitProcessing=true;promise.done(function(){newPasswordStore.isAuthenticated=true;newPasswordStore.isSubmitted=true;newPasswordStore.isSubmitProcessing=false;window.location.href=RNB.Globals.secureDynaSitePath+'/account/details.do';});promise.fail(function(){newPasswordStore.isAuthenticated=false;newPasswordStore.isSubmitted=true;newPasswordStore.isSubmitProcessing=false;});}}else{var promise=RNB.Account.REST.API.sendPasswordResetLink(form.model.username);newPasswordStore.isSubmitProcessing=true;promise.then(function(){newPasswordStore.emailSent=true;newPasswordStore.isSubmitted=true;newPasswordStore.isSubmitProcessing=false;});promise.catch(function(){newPasswordStore.emailSent=false;newPasswordStore.isSubmitted=true;newPasswordStore.isSubmitProcessing=false;});}
return false;})});var verifyPromise=RNB.Account.REST.API.getResetPasswordKeyValidity(newPasswordStore.resetKey);verifyPromise.done(mobx.action(function(){newPasswordStore.form=RNB.Formz2.Model.Builders.form(RNB.Account.NewPassword.formModel(),RNB.Account.NewPassword.formSettings(newPasswordStore.submitHandler));newPasswordStore.isKeyValid=true;newPasswordStore.isVerifyProcessing=false;}));verifyPromise.fail(mobx.action(function(){newPasswordStore.form=RNB.Formz2.Model.Builders.form(RNB.Account.ResetPassword.formModel(),RNB.Account.ResetPassword.formSettings(newPasswordStore));newPasswordStore.isKeyValid=false;newPasswordStore.isVerifyProcessing=false;}));return newPasswordStore;});})();RNB.Util.createNS('RNB.Account');(function(){'use strict';RNB.Account.StatusActions={signOutClicked:new signals.Signal(),signInClicked:new signals.Signal(),myAccountClicked:new signals.Signal(),wishlistClicked:new signals.Signal()};}());RNB.Util.createNS('RNB.Account.Renderer');(function(){'use strict';RNB.Account.Renderer.CartStatus=mobxReact.observer(function cartStatus(){var root=RNB.Globals.isMobile?RNB.Globals.rootRelativeMobileSitePath:'';var cartHref=root+'/shop/shoppingcart/cartDetails.do';return(React.DOM.a({href:cartHref,key:'cart-link',className:'cart-items-status-link'},'Cart ',React.createElement('span',{className:'cart-items-summary-count'},'('+RNB.User.userModel.customer.totalQuantity+')')));});}());RNB.Util.createNS('RNB.Account.Renderer');(function(){'use strict';RNB.Account.Renderer.TopLinks=mobxReact.observer(function(){var userModel=RNB.User.userModel;var children=[];if(!(userModel.employee&&userModel.customerStatus==='Guest')){children.push(React.createElement(RNB.Account.Renderer.SignInStatus,{key:'sign-in-status'}));}
children.push(React.createElement(RNB.Account.Renderer.CartStatus,{key:'cart-count-status'}));children.push(React.createElement(RNB.Account.Renderer.WishlistStatus,{key:'wishlist-count-status',wishlistCartQuantity:this.props.wishlistCartQuantity,wishlistClicked:RNB.Account.StatusActions.wishlistClicked}));return React.createElement('div',{key:'top-links',className:'top-links'},children);});}());RNB.Util.createNS('RNB.Account.Renderer');(function(){'use strict';var secureDynaSitePath=RNB.Globals.secureDynaSitePath;var startX=0;var startY=0;RNB.Account.Renderer.SignInStatus=mobxReact.observer(React.createClass({displayName:'Sign In Status',propTypes:{signInClicked:React.PropTypes.object,signOutClicked:React.PropTypes.object},getDefaultProps:function(){return{signInClicked:RNB.Account.StatusActions.signInClicked,signOutClicked:RNB.Account.StatusActions.signOutClicked,myAccountClicked:RNB.Account.StatusActions.myAccountClicked};},render:function(){var userModel=RNB.User.userModel;var accountLink=[];var touchers={onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd};var signedInDisplayText='My Account';if(userModel.employee){signedInDisplayText='Account';}
if(userModel.customer.loggedIn){accountLink.push(React.createElement('a',{className:'account-status-link','data-nav-track':'MY ACCOUNT',href:secureDynaSitePath+_.get(RNB,'User.userModel.customer._links.accountPage.href'),key:'account-link',onClick:this.handleMyAccountClick},signedInDisplayText));if(!userModel.employee){accountLink.push(React.createElement('a',_.assign({className:'sign-out-status-link','data-nav-track':'SIGN OUT',href:RNB.Globals.sitePath+'/logout',key:'logout-status-link',onClick:this.handleSignOutClick},touchers),'Sign out'));}}else{accountLink.push(React.createElement('a',_.assign({className:'signin-status-link','data-nav-track':'SIGN IN',href:'/account/sign-in/',key:'sign-in-link',onClick:this.handleSignInClick},touchers),'My Account'));}
return React.createElement('div',{className:'account-status'},accountLink);},handleSignInClick:function(event){event.preventDefault();this.props.signInClicked.dispatch(function(){$('.signin-status-link, .account-status-link').focus();});},handleSignOutClick:function(event){event.preventDefault();this.props.signOutClicked.dispatch();},handleMyAccountClick:function(event){event.preventDefault();this.props.myAccountClicked.dispatch(function(){$('.signin-status-link, .account-status-link').focus();});},handleTouchStart:function(event){startX=event.changedTouches[0].pageX;startY=event.changedTouches[0].pageY;},handleTouchEnd:function(event){var endX=event.changedTouches[0].pageX;var endY=event.changedTouches[0].pageY;var distanceX=Math.abs(startX-endX);var distanceY=Math.abs(startY-endY);var distance=distanceX+distanceY;if(distance>1&&distance<30){event.target.click();}}}));}());RNB.Util.createNS('RNB.Account.Renderer');(function(){'use strict';var secureDynaSitePath=RNB.Globals.secureDynaSitePath;RNB.Account.Renderer.WishlistStatus=mobxReact.observer(React.createClass({displayName:'Wishlist Status',render:function(){var userModel=RNB.User.userModel;var wishListLink=React.createElement('a',{href:secureDynaSitePath+'/shop/wishlistcart/cartDetails.do',key:'wish-list-link',className:'wishlist-items-status-link',onClick:this.wishlistClicked},'Wish list ('+userModel.customer.wishlistCartQuantity+')');return wishListLink;},wishlistClicked:function(event){event.preventDefault();this.props.wishlistClicked.dispatch(event);}}));}());RNB.Util.createNS('RNB.Account');(function(){'use strict';RNB.Account.HelperFunctions={redirectToLogin:function(){RNB.Util.redirect(RNB.Globals.secureDynaSitePath+'/account/sign-in/');}};}());RNB.Util.createNS('RNB.Account.TopLinks');(function(){'use strict';var accountUrl=_.get(RNB,'User.userModel.customer._links.accountPage.href','/account/details.do');var renderTargets={fullSiteTopLinks:document.getElementById('react-top-links'),fullSiteShopTopLinks:document.getElementById('header'),$cartStatus:$('.react-cart-status'),$wishlistStatus:$('.react-wishlist-status'),$signinStatus:$('.react-signin-status'),mobileSiteShopCartTop:document.getElementById('header')};var renderCollection=function($elements,renderer,props){$elements.each(function(){if($(this).exists()){ReactDOM.render(React.createElement(renderer,props),$(this).get(0));}});};var _renderTopLinksFull=function(){if(!renderTargets.fullSiteTopLinks&&!renderTargets.fullSiteShopTopLinks){return false;}
if(renderTargets.fullSiteTopLinks){ReactDOM.render(React.createElement(RNB.Account.Renderer.TopLinks,RNB.User.userModel.customer),renderTargets.fullSiteTopLinks);}
renderCollection(renderTargets.$signinStatus,RNB.Account.Renderer.SignInStatus,{loggedIn:RNB.User.userModel.customer.loggedIn});};var _renderTopLinksMobile=function(){renderCollection(renderTargets.$cartStatus,RNB.Account.Renderer.CartStatus,{shoppingCartQuantity:RNB.User.userModel.customer.shoppingCartQuantity});if(RNB.User.userModel.customer.loggedIn){renderTargets.$wishlistStatus.show();}else{renderTargets.$wishlistStatus.hide();}
renderCollection(renderTargets.$wishlistStatus,RNB.Account.Renderer.WishlistStatus,{wishlistCartQuantity:RNB.User.userModel.customer.wishlistCartQuantity,wishlistClicked:RNB.Account.StatusActions.wishlistClicked});renderCollection(renderTargets.$signinStatus,RNB.Account.Renderer.SignInStatus,{loggedIn:RNB.User.userModel.customer.loggedIn});};if(RNB.Globals.isMobile){accountUrl=RNB.Globals.rootRelativeMobileSitePath+accountUrl;}
RNB.Account.TopLinks.initTopLinks=function(renderfunction){RNB.Account.StatusActions.signInClicked.add(function(callback){var userModel=RNB.User.userModel;if(userModel.customer.loggedIn){RNB.Util.redirect(accountUrl);}else{RNB.Util.redirect(RNB.Globals.secureDynaSitePath+'/account/sign-in/');}});RNB.Account.StatusActions.signOutClicked.add(function(){RNB.Account.REST.API.logOut();});RNB.Account.StatusActions.myAccountClicked.add(function(callback){var userModel=RNB.User.userModel;if(userModel.customer.loggedIn){RNB.Util.redirect(accountUrl);}else{RNB.Util.redirect(RNB.Globals.secureDynaSitePath+'/account/create/');}});RNB.Account.StatusActions.wishlistClicked.add(function(event){var root=RNB.Globals.isMobile?RNB.Globals.rootRelativeMobileSitePath:'';var wishlistRedirect='';wishlistRedirect=root+'/shop/wishlistcart/cartDetails.do';if(RNB.User.userModel.customer.loggedIn){RNB.Util.redirect(wishlistRedirect);}else{RNB.Account.Main.showModalSignIn({modalOptions:{onCloseFocusElement:event?event.target:null}},function(){RNB.Util.redirect(wishlistRedirect);});}});renderfunction();RNB.Account.Actions.cartSummaryUpdated.add(renderfunction,this);};$(document).ready(function(){if(RNB.Globals.isMobile||RNB.Util.Uri.getParameterByName('decorator')==='m-primary'){RNB.Account.TopLinks.initTopLinks(_renderTopLinksMobile);}else{RNB.Account.TopLinks.initTopLinks(_renderTopLinksFull);}});}());